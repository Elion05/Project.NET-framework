@model MangaBook_Models.LogError

@{
    ViewData["Title"] = "Details";
}

@if (User.IsInRole("Admin") == false && User.IsInRole("System_Admin") == false)
{
    <script>
        window.location.href = '/Identity/Account/AccessDenied';
    </script>
}

<h1>Details</h1>

<link rel="stylesheet" href="~/css/LogErrors.css" asp-append-version="true" />

<div class="details-container">
    <h4>LogError</h4>
    <hr />
    <dl class="row">
        <dt class="col-sm-2">@Html.DisplayNameFor(model => model.TimeStamp)</dt>
        <dd class="col-sm-10">@Html.DisplayFor(model => model.TimeStamp)</dd>
        <dt class="col-sm-2">@Html.DisplayNameFor(model => model.DeviceName)</dt>
        <dd class="col-sm-10">@Html.DisplayFor(model => model.DeviceName)</dd>
        <dt class="col-sm-2">@Html.DisplayNameFor(model => model.Application)</dt>
        <dd class="col-sm-10">@Html.DisplayFor(model => model.Application)</dd>
        <dt class="col-sm-2">@Html.DisplayNameFor(model => model.LogLevel)</dt>
        <dd class="col-sm-10">@Html.DisplayFor(model => model.LogLevel)</dd>
        <dt class="col-sm-2">@Html.DisplayNameFor(model => model.ThreadId)</dt>
        <dd class="col-sm-10">@Html.DisplayFor(model => model.ThreadId)</dd>
        <dt class="col-sm-2">@Html.DisplayNameFor(model => model.EventId)</dt>
        <dd class="col-sm-10">@Html.DisplayFor(model => model.EventId)</dd>
        <dt class="col-sm-2">@Html.DisplayNameFor(model => model.EventName)</dt>
        <dd class="col-sm-10">@Html.DisplayFor(model => model.EventName)</dd>
        <dt class="col-sm-2">@Html.DisplayNameFor(model => model.ExceptionMessage)</dt>
        <dd class="col-sm-10">@Html.DisplayFor(model => model.ExceptionMessage)</dd>
        <dt class="col-sm-2">@Html.DisplayNameFor(model => model.StackTrace)</dt>
        <dd class="col-sm-10">
            <div class="stacktrace-details-container">
                <div class="stacktrace-details-content" id="stacktrace-details-@Model.Id">
                    @Html.DisplayFor(model => model.StackTrace)
                </div>
                <button class="stacktrace-details-toggle" type="button"
                        onclick="toggleStacktraceDetails(@Model.Id)">
                    Meer/Minder
                </button>
            </div>
        </dd>
        <dt class="col-sm-2">@Html.DisplayNameFor(model => model.Source)</dt>
        <dd class="col-sm-10">@Html.DisplayFor(model => model.Source)</dd>
        <dt class="col-sm-2">@Html.DisplayNameFor(model => model.Message)</dt>
        <dd class="col-sm-10">@Html.DisplayFor(model => model.Message)</dd>
    </dl>
</div>
<div>
    <a asp-action="Index">Back to List</a>
</div>

<script>
function toggleStacktraceDetails(id) {
    var el = document.getElementById('stacktrace-details-' + id);
    el.classList.toggle('expanded');
}
</script>
